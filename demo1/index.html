<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>websocket</title>
</head>
<body>
	<h1>Echo Test</h1>
	<input type="text" id="sendTxt">
	<button id="sendBtn">发送</button>
	<div id="recv"></div>
	<script type="text/javascript">
		//var webSocket = require('ws');
		var recv= document.getElementById("recv");
		var sendBtn = document.getElementById("sendBtn");
		var sendTxt = document.getElementById("sendTxt");
		/*if(windows.WebSocket){

		}*/
		var ws = new WebSocket("ws://localhost:8001/");//here is the point, WebSocket the first alphat,should be uppercase
		ws.onopen = function(){
			console.log('websocket open');
			recv.innerHTML = "Connected";
		}
		ws.onclose = function(){
			console.log('websocket close.');
		}
		ws.onmessage = function (event) {
			var data = event.data;
			recv.innerHTML = data;
        };
		sendBtn.onclick = function(){
			//console.log("have sent message.")
			var txt = sendTxt.value;
			//console.log(txt);
			ws.send(txt);//here is the point
		}
	</script>
</body>
</html>